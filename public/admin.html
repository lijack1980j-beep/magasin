<!-- /admin.html  (FULL FILE) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin – Glitch Signal</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/styles.css" />

  <style>
    .admin-wrap { padding: 90px 0 60px; }
    .admin-card {
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      padding: 22px;
      backdrop-filter: blur(10px);
    }
    .admin-grid {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 18px;
      margin-top: 18px;
    }
    @media (max-width: 900px){
      .admin-grid { grid-template-columns: 1fr; }
    }

    .admin-title { margin: 0 0 8px; }
    .admin-sub { opacity: 0.85; margin: 0 0 18px; }

    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    @media (max-width: 700px){
      .form-row { grid-template-columns: 1fr; }
    }

    .admin-card label { display:block; font-size: 0.9rem; opacity: 0.9; margin: 10px 0 6px; }
    .admin-card input, .admin-card textarea, .admin-card select {
      width: 100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.25);
      color: #fff;
      outline: none;
      font-family: Poppins, sans-serif;
    }
    .admin-card textarea { resize: vertical; min-height: 90px; }

    .btn-row { display:flex; gap: 10px; flex-wrap: wrap; margin-top: 14px; }
    .btn {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .btn:hover { transform: translateY(-1px); border-color: rgba(255,255,255,0.24); }
    .btn.primary { background: rgba(0, 255, 255, 0.12); border-color: rgba(0,255,255,0.25); }
    .btn.primary:hover { background: rgba(0, 255, 255, 0.18); border-color: rgba(0,255,255,0.35); }
    .btn.danger { background: rgba(255, 0, 80, 0.14); border-color: rgba(255,0,80,0.28); }
    .btn.danger:hover { background: rgba(255, 0, 80, 0.20); border-color: rgba(255,0,80,0.40); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }

    .table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      overflow: hidden;
      border-radius: 14px;
    }
    .table th, .table td {
      padding: 10px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      text-align: left;
      font-size: 0.95rem;
      vertical-align: top;
    }
    .table th { opacity: 0.9; font-weight: 700; }
    .muted { opacity: 0.75; font-size: 0.92rem; }
    .pill {
      display:inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      font-size: 0.82rem;
      opacity: 0.95;
    }
    .split { display:flex; align-items:center; justify-content: space-between; gap: 10px; }
    .hidden { display:none !important; }
    .notice { margin-top: 10px; padding: 10px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.05); }
  </style>
</head>

<body>

  <header class="navbar">
    <div class="container nav-container">
      <div class="logo"><a href="/index.html">Glitch&nbsp;Signal</a></div>
      <nav id="nav-menu" class="nav-links">
        <a href="/index.html#about">About</a>
        <a href="/index.html#services">Services</a>
        <a href="/index.html#portfolio">Portfolio</a>
        <a href="/index.html#contact">Contact</a>
        <a href="/gallery.html">Gallery</a>
        <a href="/admin.html" class="active">Admin</a>
      </nav>
      <button id="nav-toggle" aria-label="Toggle navigation">
        <span class="bar"></span><span class="bar"></span><span class="bar"></span>
      </button>
    </div>
  </header>

  <main class="admin-wrap">
    <div class="container">

      <!-- LOGIN -->
      <section id="admin-login" class="admin-card">
        <h1 class="admin-title">Admin Panel</h1>
        <p class="admin-sub">Login to manage projects and view clients.</p>

        <label for="admin-password">Admin Password</label>
        <input type="password" id="admin-password" placeholder="Enter password" />

        <div class="btn-row">
          <button class="btn primary" id="login-btn" type="button">Login</button>
          <button class="btn" id="change-pass-btn" type="button">Change Password</button>
        </div>

        <div class="notice muted">
          Prototype mode: password is stored locally in your browser.
        </div>
      </section>

      <!-- DASHBOARD -->
      <section id="admin-dashboard" class="hidden">
        <div class="dash-container">

          <div class="split" style="padding-top: 100px;">
            <div>
              <h2 style="margin:0;">Dashboard</h2>
              <div class="muted">Choose a tab: Services or Gallery Manager.</div>
            </div>

            <div class="btn-row" style="margin:0;">
              <button class="btn" id="seed-demo-btn" type="button">Seed Demo Data</button>
              <button class="btn danger" id="logout-btn" type="button">Logout</button>
            </div>
          </div>

          <!-- TABS -->
          <div class="btn-row" style="margin-top:12px;">
            <button class="btn primary" id="tabBtnServices" type="button">Services</button>
            <button class="btn" id="tabBtnGallery" type="button">Gallery Manager</button>
          </div>

          <!-- SERVICES TAB -->
          <div id="tabServices">

            <div class="admin-grid">
              <!-- PROJECT FORM -->
              <div class="admin-card">
                <h3 style="margin-top:0;">Add / Edit Project (Services)</h3>
                <p class="muted" style="margin-top:0;">
                  Stored in localStorage (prototype). Used by store pages later.
                </p>

                <input type="hidden" id="project-id" />

                <div class="form-row">
                  <div>
                    <label for="project-title">Title</label>
                    <input id="project-title" type="text" placeholder="e.g. Modern Facade Concept" />
                  </div>
                  <div>
                    <label for="project-category">Category</label>
                    <select id="project-category">
                      <option value="uiux">UI/UX</option>
                      <option value="interior">Interior Architecture</option>
                      <option value="exterior">Exterior Architecture</option>
                    </select>
                  </div>
                </div>

                <label for="project-desc">Description</label>
                <textarea id="project-desc" placeholder="Short description..."></textarea>

                <div class="form-row">
                  <div>
                    <label for="project-price">Price (USD)</label>
                    <input id="project-price" type="number" step="0.01" placeholder="29.00" />
                  </div>
                  <div>
                    <label for="project-image">Cover Image (URL / Path)</label>
                    <input id="project-image" type="text" placeholder="images/uiux.png OR https://..." />

                    <!-- ✅ NEW: multiple images -->
                    <label for="project-images">More Images (URLs, one per line)</label>
                    <textarea id="project-images" rows="4" placeholder="https://.../1.jpg&#10;https://.../2.jpg"></textarea>

                    <label for="project-image-file">Upload Image (recommended)</label>
                    <input id="project-image-file" type="file" accept="image/*" />

                    <label for="project-video-url">Video (URL)</label>
                    <input id="project-video-url" type="text" placeholder="Direct .mp4 link recommended" />

                    <label for="project-video-file">Upload Video (small only)</label>
                    <input id="project-video-file" type="file" accept="video/*" />
                  </div>
                </div>

                <div class="btn-row">
                  <button class="btn primary" id="save-project-btn" type="button">Save Project</button>
                  <button class="btn" id="reset-form-btn" type="button">Reset</button>
                  <button class="btn danger" id="delete-project-btn" type="button" disabled>Delete</button>
                </div>

                <div id="form-msg" class="notice muted hidden"></div>
              </div>

              <!-- CLIENTS -->
              <div class="admin-card">
                <h3 style="margin-top:0;">Clients / Purchases</h3>
                <p class="muted" style="margin-top:0;">
                  Reads from localStorage. Connect to cart later.
                </p>

                <div class="btn-row" style="margin-top:0;">
                  <button class="btn" id="export-clients-btn" type="button">Export JSON</button>
                  <button class="btn danger" id="clear-clients-btn" type="button">Clear Clients</button>
                </div>

                <div id="clients-empty" class="notice muted">No purchases yet.</div>
                <div style="overflow:auto;">
                  <table class="table" id="clients-table" style="display:none;">
                    <thead>
                      <tr>
                        <th>Client</th>
                        <th>Email</th>
                        <th>Project</th>
                        <th>Paid</th>
                        <th>Date</th>
                      </tr>
                    </thead>
                    <tbody id="clients-body"></tbody>
                  </table>
                </div>
              </div>
            </div>

            <!-- PROJECT LIST -->
            <section class="admin-card" style="margin-top:18px;">
              <div class="split">
                <div>
                  <h3 style="margin:0;">All Projects (Services)</h3>
                  <div class="muted">Click a project to edit it.</div>
                </div>
                <div class="btn-row" style="margin:0;">
                  <button class="btn" id="export-projects-btn" type="button">Export JSON</button>
                  <button class="btn danger" id="clear-projects-btn" type="button">Clear Projects</button>
                </div>
              </div>

              <div style="overflow:auto;">
                <table class="table" id="projects-table">
                  <thead>
                    <tr>
                      <th>Title</th>
                      <th>Category</th>
                      <th>Description</th>
                      <th>Price</th>
                      <th>Cover</th>
                      <th>Images</th>
                      <th>Video</th>
                    </tr>
                  </thead>
                  <tbody id="projects-body"></tbody>
                </table>
              </div>
            </section>

          </div>
          <!-- END SERVICES TAB -->

          <!-- GALLERY TAB -->
          <div id="tabGallery" class="hidden">

            <section class="admin-card" style="margin-top:18px;">
              <h3 style="margin-top:0;">Gallery Manager (Supabase)</h3>
              <p class="muted" style="margin-top:0;">These projects appear in /gallery.html</p>

              <label>Admin API Key</label>
              <input id="adminKey" type="password" placeholder="Enter ADMIN_API_KEY" />

              <div class="form-row">
                <div>
                  <label>Title</label>
                  <input id="pTitle" />
                </div>
                <div>
                  <label>Category</label>
                  <select id="pCategory">
                    <option value="uiux">UI/UX</option>
                    <option value="interior">Interior</option>
                    <option value="exterior">Exterior</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <label>Description</label>
              <textarea id="pDescription" placeholder="Short description..."></textarea>

              <label>Tags (comma separated)</label>
              <input id="pTags" placeholder="modern, minimal, figma" />

              <div class="form-row">
                <div>
                  <label>Live URL (optional)</label>
                  <input id="pLive" placeholder="https://..." />
                </div>
                <div>
                  <label>GitHub URL (optional)</label>
                  <input id="pRepo" placeholder="https://github.com/..." />
                </div>
              </div>

              <div class="form-row" style="align-items:center;">
                <label style="display:flex;gap:8px;align-items:center;margin:0;">
                  <input id="pFeatured" type="checkbox" /> Featured
                </label>
                <div>
                  <label style="margin:0 0 6px;">Sort order</label>
                  <input id="pSort" type="number" value="0" />
                </div>
              </div>

              <label>Cover image upload</label>
              <input id="pFile" type="file" accept="image/*" />

              <label>OR image URL</label>
              <input id="pImageUrl" placeholder="https://..." />

              <!-- ✅ NEW: extra images -->
              <label>More images (URLs, one per line)</label>
              <textarea id="pExtraImages" rows="4" placeholder="https://.../1.jpg&#10;https://.../2.jpg"></textarea>

              <div class="btn-row">
                <button class="btn primary" id="saveProjectBtn" type="button">Save to Gallery</button>
                <button class="btn" id="cancelEditBtn" type="button">Cancel Edit</button>
              </div>

              <div id="adminStatus" class="notice muted hidden"></div>

              <hr style="border-color:rgba(255,255,255,.08);margin:18px 0;" />

              <h3 style="margin:0;">Existing Gallery Projects</h3>
              <div id="projectsList" style="display:grid;gap:12px;"></div>
            </section>

          </div>
          <!-- END GALLERY TAB -->

        </div>
      </section>

    </div>
  </main>

  <script src="/script.js"></script>
  <script src="/admin-gallery.js" defer></script>

  <!-- Admin Logic (Services + Auth + Tabs) -->
  <script>
(() => {
  // ====== Storage Keys ======
  const KEY_ADMIN_PASS = "gs_admin_password";
  const KEY_ADMIN_AUTH = "gs_admin_authed";
  const KEY_PROJECTS   = "gs_projects";
  const KEY_CLIENTS    = "gs_clients";

  const DEFAULT_PASS = "0000";
  const byId = (id) => document.getElementById(id);

  function fileToDataUrl(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }

  function isProbablyTooBigForLocalStorage(dataUrl) {
    const approxBytes = Math.ceil((dataUrl.length - "data:".length) * 0.75);
    return approxBytes > 2_000_000;
  }

  function safeParse(json, fallback){
    try { return JSON.parse(json); } catch(e) { return fallback; }
  }

  function getProjects(){
    return safeParse(localStorage.getItem(KEY_PROJECTS), []);
  }
  function setProjects(projects){
    localStorage.setItem(KEY_PROJECTS, JSON.stringify(projects));
  }

  function getClients(){
    return safeParse(localStorage.getItem(KEY_CLIENTS), []);
  }
  function setClients(clients){
    localStorage.setItem(KEY_CLIENTS, JSON.stringify(clients));
  }

  function categoryLabel(val){
    if(val === "uiux") return "UI/UX";
    if(val === "interior") return "Interior";
    if(val === "exterior") return "Exterior";
    return val;
  }

  function showMsg(text){
    const box = byId("form-msg");
    if (!box) return alert(text);
    box.textContent = text;
    box.classList.remove("hidden");
    setTimeout(() => box.classList.add("hidden"), 2200);
  }

  function newId(){
    return "p_" + Math.random().toString(16).slice(2) + Date.now().toString(16);
  }

  // ====== Auth ======
  function ensurePassword(){
    if(!localStorage.getItem(KEY_ADMIN_PASS)){
      localStorage.setItem(KEY_ADMIN_PASS, DEFAULT_PASS);
    }
  }

  // ✅ session auth + auto logout on leave
  function isAuthed(){
    return sessionStorage.getItem(KEY_ADMIN_AUTH) === "true";
  }
  function setAuthed(val){
    sessionStorage.setItem(KEY_ADMIN_AUTH, val ? "true" : "false");
  }
  window.addEventListener("beforeunload", () => {
    setAuthed(false);
    sessionStorage.removeItem("GS_ADMIN_KEY");
  });

  function showLogin(){
    byId("admin-login")?.classList.remove("hidden");
    byId("admin-dashboard")?.classList.add("hidden");
    if (byId("admin-password")) byId("admin-password").value = "";
  }

  function showDashboard(){
    byId("admin-login")?.classList.add("hidden");
    byId("admin-dashboard")?.classList.remove("hidden");
    renderProjects();
    renderClients();
    resetForm();
    showServicesTab();
  }

  // ====== Render Projects (Services/localStorage) ======
  function renderProjects(){
    const tbody = byId("projects-body");
    if (!tbody) return;
    tbody.innerHTML = "";
    const projects = getProjects();

    if(projects.length === 0){
      const tr = document.createElement("tr");
      tr.innerHTML = `<td colspan="7" class="muted">No projects yet. Add one above.</td>`;
      tbody.appendChild(tr);
      return;
    }

    projects.forEach(p => {
      const tr = document.createElement("tr");
      tr.style.cursor = "pointer";
      tr.innerHTML = `
        <td><strong>${escapeHtml(p.title)}</strong></td>
        <td><span class="pill">${categoryLabel(p.category)}</span></td>
        <td class="muted">${escapeHtml(p.desc || "")}</td>
        <td>${p.price === "" || p.price == null ? "—" : "$" + Number(p.price).toFixed(2)}</td>
        <td class="muted" style="max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${escapeHtml(p.image || "")}</td>
        <td class="muted">${Array.isArray(p.images) ? p.images.length : 0}</td>
        <td class="muted">${p.videoUrl ? "yes" : "—"}</td>
      `;
      tr.addEventListener("click", () => loadProjectToForm(p.id));
      tbody.appendChild(tr);
    });
  }

  function loadProjectToForm(id){
    const projects = getProjects();
    const p = projects.find(x => x.id === id);
    if(!p) return;

    byId("project-id").value = p.id;
    byId("project-title").value = p.title || "";
    byId("project-category").value = p.category || "uiux";
    byId("project-desc").value = p.desc || "";
    byId("project-price").value = p.price ?? "";
    byId("project-image").value = p.image || "";
    byId("project-images").value = Array.isArray(p.images) ? p.images.join("\n") : "";
    byId("project-video-url").value = p.videoUrl || "";

    byId("delete-project-btn").disabled = false;
    showMsg("Loaded for editing.");
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  function resetForm(){
    byId("project-id").value = "";
    byId("project-title").value = "";
    byId("project-category").value = "uiux";
    byId("project-desc").value = "";
    byId("project-price").value = "";
    byId("project-image").value = "";
    byId("project-images").value = "";
    byId("project-video-url").value = "";
    if (byId("project-image-file")) byId("project-image-file").value = "";
    if (byId("project-video-file")) byId("project-video-file").value = "";
    byId("delete-project-btn").disabled = true;
  }

  function validateProject(){
    const title = byId("project-title").value.trim();
    const price = byId("project-price").value.trim();
    if(!title) return "Title is required.";
    if(price && Number(price) < 0) return "Price must be positive.";
    return null;
  }

  async function saveProject(){
    const err = validateProject();
    if(err) return showMsg(err);

    const projects = getProjects();
    const id = byId("project-id").value || newId();

    let imageValue = byId("project-image").value.trim();
    let videoUrl = byId("project-video-url").value.trim();

    // ✅ NEW: multiple images
    const images = (byId("project-images")?.value || "")
      .split("\n")
      .map(s => s.trim())
      .filter(Boolean);

    const imgFileInput = byId("project-image-file");
    if (imgFileInput && imgFileInput.files && imgFileInput.files[0]) {
      const dataUrl = await fileToDataUrl(imgFileInput.files[0]);
      if (isProbablyTooBigForLocalStorage(dataUrl)) {
        return showMsg("Image too large. Use a smaller image or a URL/path.");
      }
      imageValue = dataUrl;
    }

    const vidFileInput = byId("project-video-file");
    if (vidFileInput && vidFileInput.files && vidFileInput.files[0]) {
      const dataUrl = await fileToDataUrl(vidFileInput.files[0]);
      if (isProbablyTooBigForLocalStorage(dataUrl)) {
        return showMsg("Video too large for browser storage. Use a video URL instead.");
      }
      videoUrl = dataUrl;
    }

    const data = {
      id,
      title: byId("project-title").value.trim(),
      category: byId("project-category").value,
      desc: byId("project-desc").value.trim(),
      price: byId("project-price").value === "" ? "" : Number(byId("project-price").value),
      image: imageValue,   // cover
      images,              // ✅ NEW
      videoUrl
    };

    const idx = projects.findIndex(x => x.id === id);
    if(idx >= 0) projects[idx] = data;
    else projects.unshift(data);

    setProjects(projects);
    renderProjects();
    byId("project-id").value = id;
    byId("delete-project-btn").disabled = false;

    showMsg("Project saved ✅");
  }

  function deleteProject(){
    const id = byId("project-id").value;
    if(!id) return;

    if(!confirm("Delete this project?")) return;

    const projects = getProjects().filter(x => x.id !== id);
    setProjects(projects);
    renderProjects();
    resetForm();
    showMsg("Project deleted ✅");
  }

  // ====== Render Clients ======
  function renderClients(){
    const clients = getClients();
    const empty = byId("clients-empty");
    const table = byId("clients-table");
    const body = byId("clients-body");
    if (!empty || !table || !body) return;

    body.innerHTML = "";

    if(clients.length === 0){
      empty.classList.remove("hidden");
      table.style.display = "none";
      return;
    }

    empty.classList.add("hidden");
    table.style.display = "table";

    clients.slice().reverse().forEach(c => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><strong>${escapeHtml(c.name || "—")}</strong></td>
        <td class="muted">${escapeHtml(c.email || "—")}</td>
        <td>${escapeHtml(c.projectTitle || "—")}</td>
        <td>$${Number(c.amount || 0).toFixed(2)}</td>
        <td class="muted">${escapeHtml(c.date || "—")}</td>
      `;
      body.appendChild(tr);
    });
  }

  function downloadJson(filename, obj){
    const blob = new Blob([JSON.stringify(obj, null, 2)], { type: "application/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  }

  function seedDemo(){
    const demoProjects = [
      { id: newId(), title:"iOS UI Kit", category:"uiux", desc:"Complete mobile wireframe kit.", price:29, image:"images/uiux.png", images:["images/uiux.png","images/uiux.png"], videoUrl:"" },
      { id: newId(), title:"Moodboard Pack", category:"interior", desc:"Textures, palettes, and style references.", price:19, image:"images/interior.png", images:["images/interior.png"], videoUrl:"" },
      { id: newId(), title:"Modern Facade Concept", category:"exterior", desc:"Exterior elevation with materials.", price:39, image:"images/exterior.png", images:["images/exterior.png"], videoUrl:"" }
    ];
    setProjects(demoProjects);
    renderProjects();
    showMsg("Demo data added ✅");
  }

  function escapeHtml(str){
    return String(str ?? "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  // ====== Tabs ======
  const tabServices = byId("tabServices");
  const tabGallery  = byId("tabGallery");
  const btnServices = byId("tabBtnServices");
  const btnGallery  = byId("tabBtnGallery");

  function showServicesTab(){
    tabServices?.classList.remove("hidden");
    tabGallery?.classList.add("hidden");
    btnServices?.classList.add("primary");
    btnGallery?.classList.remove("primary");
  }

  function showGalleryTab(){
    tabGallery?.classList.remove("hidden");
    tabServices?.classList.add("hidden");
    btnGallery?.classList.add("primary");
    btnServices?.classList.remove("primary");
    window.dispatchEvent(new Event("GS_OPEN_GALLERY_TAB"));
  }

  btnServices?.addEventListener("click", showServicesTab);
  btnGallery?.addEventListener("click", showGalleryTab);

  // ====== Events ======
  ensurePassword();

  byId("login-btn")?.addEventListener("click", () => {
    const input = byId("admin-password").value;
    const real = localStorage.getItem(KEY_ADMIN_PASS) || DEFAULT_PASS;

    if(input === real){
      setAuthed(true);
      showDashboard();
    } else {
      alert("Wrong password.");
    }
  });

  byId("logout-btn")?.addEventListener("click", () => {
    setAuthed(false);
    sessionStorage.removeItem("GS_ADMIN_KEY");
    showLogin();
  });

  byId("save-project-btn")?.addEventListener("click", saveProject);
  byId("reset-form-btn")?.addEventListener("click", resetForm);
  byId("delete-project-btn")?.addEventListener("click", deleteProject);

  byId("export-projects-btn")?.addEventListener("click", () => downloadJson("gs-projects.json", getProjects()));
  byId("export-clients-btn")?.addEventListener("click", () => downloadJson("gs-clients.json", getClients()));

  byId("clear-projects-btn")?.addEventListener("click", () => {
    if(confirm("Clear ALL projects?")) {
      setProjects([]);
      renderProjects();
      resetForm();
    }
  });

  byId("clear-clients-btn")?.addEventListener("click", () => {
    if(confirm("Clear ALL clients?")) {
      setClients([]);
      renderClients();
    }
  });

  byId("seed-demo-btn")?.addEventListener("click", seedDemo);

  // ====== Auto-open correct view ======
  if(isAuthed()) showDashboard();
  else showLogin();
})();
  </script>
</body>
</html>
